### ajax提交在网络延迟下防止多次提交

网络延迟下防止多次提交

```javascript
// 设置一个中间变量 标志位
var post_flag = false;

// 提交
function post() {
  // 如果正在提交就直接返回 停止执行 或者将按钮置灰
  if(post_flag) return;
  post_flag = true;
  $.ajax({
    url: '/.php',
    data: {
      a: 1,
      b: 2
    },
    success: function() {
      // 提交成功之后将标志为可提交状态
      post_flag = false;
    },
    error: function() {
      post_flag = false; // 失败也需要将标志标记为可提交状态
    }
  })
}
```

