### position: fixed



**fixed 元素将相对于视口的位置来指定其位置。并且元素的位置在屏幕滚动时不会改变。**



#### 1 失效的position：fixed

当元素祖先的transform属性是非none的时候。 容器由视口改为祖先。 这是因为Stacking Context

* 任何非none的transform值都会导致一个堆叠上下文 和包含块的创建
* 由于堆叠上下文的创建 该元素会影响其子元素的固定定位 设置了position: fixed 的子元素将不会基于viewport 定位 而不是基于这个父元素。



**简单记住生成了Stacking Context的元素会影响该元素的层叠关系和定位关系** 那么所有能够生成层叠上下文的元素都会使得子元素的position：fixed相对它 而不是视口进行定位。

哪些会生成层叠上下文呢？

* 根元素 html
* z-index 值不是auto的 绝对/相对定位
* z-index 不为auto 的flex项目
* opacity 属性小于1 
* transform 不是none
* perspective 不为none
* position: fixed
* filter不为none



最后得到的是 有四种方式会影响 fixed的定位

* transform 不为none的元素
* transform-style: preserve-3d 的元素 (指定嵌套元素是怎样在三维空间中呈现)
* perspective 不为none  （改变3D元素是怎样查看透视图 只会影响3D转换元素）
* will-change 中指定了任意的css。

